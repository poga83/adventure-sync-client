<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Adventure Sync</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- JavaScript Libraries -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
</head>
<body>
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è -->
    <div id="connectionStatus" class="connection-status">
        <span id="statusText">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</span>
    </div>

    <!-- –ö–∞—Ä—Ç–∞ -->
    <div id="map"></div>

    <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
    <div class="controls">
        <select id="statusSelect">
            <option value="motorcycle">üèçÔ∏è –ú–æ—Ç–æ</option>
            <option value="bicycle">üö≤ –í–µ–ª–æ</option>
            <option value="walking">üö∂ –ü–µ—à–∫–æ–º</option>
            <option value="resting">‚òï –û—Ç–¥—ã—Ö</option>
            <option value="car">üöó –ê–≤—Ç–æ</option>
            <option value="available" selected>üü¢ –°–≤–æ–±–æ–¥–µ–Ω</option>
        </select>
        <button id="gpsBtn" title="–í–∫–ª—é—á–∏—Ç—å GPS">üìç GPS</button>
        <button id="routesBtn" title="–ú–∞—Ä—à—Ä—É—Ç—ã">üó∫Ô∏è –ú–∞—Ä—à—Ä—É—Ç—ã</button>
        <button id="markerBtn" title="–°–æ–∑–¥–∞—Ç—å –º–µ—Ç–∫—É">üìå –ú–µ—Ç–∫–∞</button>
        <button id="groupChatBtn" title="–û–±—â–∏–π —á–∞—Ç">üí¨ –ß–∞—Ç</button>
        <div class="filter-controls">
            <label>–§–∏–ª—å—Ç—Ä:</label>
            <select id="activityFilter" multiple>
                <option value="all" selected>–í—Å–µ</option>
                <option value="motorcycle">–ú–æ—Ç–æ</option>
                <option value="bicycle">–í–µ–ª–æ</option>
                <option value="walking">–ü–µ—à–∫–æ–º</option>
                <option value="car">–ê–≤—Ç–æ</option>
            </select>
        </div>
    </div>

    <!-- –ü—Ä–∏–≤–∞—Ç–Ω—ã–π —á–∞—Ç -->
    <div class="chat-window private-chat" id="privateChat">
        <div class="chat-header">
            <h3>–ß–∞—Ç —Å <span id="chatUserName"></span></h3>
            <button class="close-btn" id="closePrivateChat">√ó</button>
        </div>
        <div class="chat-messages" id="privateMessages"></div>
        <div class="chat-input">
            <input type="text" id="privateInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." maxlength="500">
            <button id="sendPrivateBtn">‚û§</button>
        </div>
    </div>

    <!-- –û–±—â–∏–π —á–∞—Ç -->
    <div class="chat-window group-chat" id="groupChat">
        <div class="chat-header">
            <h3>–û–±—â–∏–π —á–∞—Ç</h3>
            <button class="close-btn" id="closeGroupChat">√ó</button>
        </div>
        <div class="chat-messages" id="groupMessages"></div>
        <div class="chat-input">
            <input type="text" id="groupInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." maxlength="500">
            <button id="sendGroupBtn">‚û§</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –º–µ—Ç–∫–∏ -->
    <div class="modal" id="markerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h4>–°–æ–∑–¥–∞—Ç—å –º–µ—Ç–∫—É</h4>
                <button class="close-btn" id="closeMarkerModal">√ó</button>
            </div>
            <div class="modal-body">
                <input type="text" id="markerTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫" maxlength="100" required>
                <textarea id="markerDesc" rows="3" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" maxlength="500"></textarea>
                <select id="markerCategory">
                    <option value="note">üìù –ó–∞–º–µ—Ç–∫–∞</option>
                    <option value="danger">‚ö†Ô∏è –û–ø–∞—Å–Ω–æ—Å—Ç—å</option>
                    <option value="food">üçΩÔ∏è –ï–¥–∞</option>
                    <option value="fuel">‚õΩ –ó–∞–ø—Ä–∞–≤–∫–∞</option>
                    <option value="repair">üîß –†–µ–º–æ–Ω—Ç</option>
                    <option value="scenic">üèûÔ∏è –ö—Ä–∞—Å–∏–≤–æ–µ –º–µ—Å—Ç–æ</option>
                    <option value="meeting">üë• –í—Å—Ç—Ä–µ—á–∞</option>
                </select>
            </div>
            <div class="modal-footer">
                <button id="createMarkerBtn" class="btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
                <button id="cancelMarkerBtn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –º–∞—Ä—à—Ä—É—Ç–∞ -->
    <div class="modal" id="routeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h4>–ù–æ–≤—ã–π –≥—Ä—É–ø–ø–æ–≤–æ–π –º–∞—Ä—à—Ä—É—Ç</h4>
                <button class="close-btn" id="closeRouteModal">√ó</button>
            </div>
            <div class="modal-body">
                <input type="text" id="routeName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞" maxlength="100" required>
                <textarea id="routeDesc" rows="3" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞" maxlength="500"></textarea>
                <select id="routeType">
                    <option value="public">üåê –ü—É–±–ª–∏—á–Ω—ã–π</option>
                    <option value="private">üîí –ü—Ä–∏–≤–∞—Ç–Ω—ã–π</option>
                </select>
                <input type="number" id="maxParticipants" placeholder="–ú–∞–∫—Å. —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤" min="2" max="50" value="10">
            </div>
            <div class="modal-footer">
                <button id="saveRouteBtn" class="btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
                <button id="cancelRouteBtn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –º–∞—Ä—à—Ä—É—Ç–æ–≤ -->
    <div class="side-panel" id="routesPanel">
        <div class="panel-header">
            <h4>–ì—Ä—É–ø–ø–æ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã</h4>
            <button id="createRouteBtn" class="btn-small">+ –ù–æ–≤—ã–π</button>
            <button class="close-btn" id="closeRoutesPanel">√ó</button>
        </div>
        <div class="panel-body">
            <div class="routes-list" id="routesList"></div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="notifications" class="notifications-container"></div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç -->
    <script src="app.js"></script>
</body>
</html>
